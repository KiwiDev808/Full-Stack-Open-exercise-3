(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),a=t(4),u=t(2),o=t(0),i=function(e){var n=e.search,t=e.onChange;return Object(o.jsxs)("div",{children:["filter shown with ",Object(o.jsx)("input",{value:n,onChange:t})]})},s=function(e){return Object(o.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:e.nameValue,onChange:e.onChangeName})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:e.numberValue,onChange:e.onChangeNumber})," "]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.contactList,t=e.onClick;return Object(o.jsx)(o.Fragment,{children:n.map((function(e){return Object(o.jsxs)("div",{children:[e.name," ",e.number,Object(o.jsx)("button",{onClick:function(){return t(e.id,e.name)},children:"delete"})]},e.name)}))})},b=t(3),l=t.n(b),h=t(5),d=t(6),j=t.n(d),p="api/persons",m={getAll:function(){var e=Object(h.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.get(p),e.abrupt("return",n.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(h.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.a.post(p,n),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(h.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.a.delete("".concat(p,"/").concat(n)),e.abrupt("return",t.then((function(e){return e})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(h.a)(l.a.mark((function e(n,t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.a.put("".concat(p,"/").concat(n),t),e.abrupt("return",r.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},O=function(e){var n=e.message,t=e.type;return null===n?null:Object(o.jsx)("div",{className:t,children:n})},v=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(u.useState)(""),b=Object(a.a)(c,2),l=b[0],h=b[1],d=Object(u.useState)(""),j=Object(a.a)(d,2),p=j[0],v=j[1],x=Object(u.useState)(""),g=Object(a.a)(x,2),w=g[0],C=g[1],k=Object(u.useState)(null),y=Object(a.a)(k,2),S=y[0],N=y[1],P=Object(u.useState)(""),L=Object(a.a)(P,2),V=L[0],A=L[1];Object(u.useEffect)((function(){m.getAll().then((function(e){r(e)})).catch((function(e){alert("The server is offline")}))}),[]);var T=function(e){A("success"),N(e),setTimeout((function(){N(null)}),3e3)},D=function(e){A("error"),N(e),setTimeout((function(){N(null)}),3e3)},E=function(){h(""),v("")},I=w?t.filter((function(e){return e.name.toLowerCase().includes(w)})):t;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phone book"}),Object(o.jsx)(O,{type:V,message:S}),Object(o.jsx)(i,{search:w,onChange:function(e){C(e.target.value.toLowerCase())}}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(s,{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===l}))){if(window.confirm("".concat(l," is already on the phone book, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===l})).id,c={name:l,number:p,id:n};m.updatePerson(n,c).then((function(e){r(t.map((function(t){return t.id===n?e:t}))),T("Changed ".concat(l))})).catch((function(e){404===e.response.status?(D("Information of ".concat(l," has already been removed from the server")),r(t.filter((function(e){return e.id!==n})))):D(e.response.data.message)})),E()}}else{var a={name:l,number:p};m.create(a).then((function(e){r(t.concat(e)),T("Added ".concat(l)),E()})).catch((function(e){D(e.response.data.message)}))}},nameValue:l,onChangeName:function(e){h(e.target.value)},numberValue:p,onChangeNumber:function(e){v(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(f,{contactList:I,onClick:function(e,n){window.confirm("Delete ".concat(n," ?"))&&m.deletePerson(e).then((function(n){var c=t.filter((function(n){return n.id!==e}));r(c)}))}})]})};t(41);c.a.render(Object(o.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.6dfc4a8b.chunk.js.map