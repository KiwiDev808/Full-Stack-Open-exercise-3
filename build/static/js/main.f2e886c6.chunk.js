(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),a=t(4),u=t(2),o=t(0),i=function(e){var n=e.search,t=e.onChange;return Object(o.jsxs)("div",{children:["filter shown with ",Object(o.jsx)("input",{value:n,onChange:t})]})},s=function(e){return Object(o.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:e.nameValue,onChange:e.onChangeName})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:e.numberValue,onChange:e.onChangeNumber})," "]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.contactList,t=e.onClick;return Object(o.jsx)(o.Fragment,{children:n.map((function(e){return Object(o.jsxs)("div",{children:[e.name," ",e.number,Object(o.jsx)("button",{onClick:function(){return t(e.id,e.name)},children:"delete"})]},e.name)}))})},b=t(3),l=t.n(b),h=t(5),j=t(6),d=t.n(j),m="api/persons",p={getAll:function(){var e=Object(h.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.a.get(m),e.abrupt("return",n.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(h.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.a.post(m,n),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(h.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.a.delete("".concat(m,"/").concat(n)),e.abrupt("return",t.then((function(e){return e})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(h.a)(l.a.mark((function e(n,t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.a.put("".concat(m,"/").concat(n),t),e.abrupt("return",r.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},v=function(e){var n=e.message,t=e.type;return null===n?null:Object(o.jsx)("div",{className:t,children:n})},O=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(u.useState)(""),b=Object(a.a)(c,2),l=b[0],h=b[1],j=Object(u.useState)(""),d=Object(a.a)(j,2),m=d[0],O=d[1],x=Object(u.useState)(""),w=Object(a.a)(x,2),g=w[0],C=w[1],k=Object(u.useState)(null),y=Object(a.a)(k,2),S=y[0],N=y[1],P=Object(u.useState)(""),L=Object(a.a)(P,2),V=L[0],A=L[1];Object(u.useEffect)((function(){p.getAll().then((function(e){r(e)})).catch((function(e){alert("The server is offline")}))}),[]);var T=function(e){A("success"),N(e),setTimeout((function(){N(null)}),3e3)},D=function(){h(""),O("")},E=g?t.filter((function(e){return e.name.toLowerCase().includes(g)})):t;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phone book"}),Object(o.jsx)(v,{type:V,message:S}),Object(o.jsx)(i,{search:g,onChange:function(e){C(e.target.value.toLowerCase())}}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(s,{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===l}))){if(window.confirm("".concat(l," is already on the phone book, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===l})).id,c={name:l,number:m,id:n};p.updatePerson(n,c).then((function(e){r(t.map((function(t){return t.id===n?e:t}))),T("Changed ".concat(l))})).catch((function(e){var c;c="Information of ".concat(l," has already been removed from the server"),A("error"),N(c),setTimeout((function(){N(null)}),3e3),r(t.filter((function(e){return e.id!==n})))})),D()}}else{var a={name:l,number:m};p.create(a).then((function(e){r(t.concat(e)),T("Added ".concat(l)),D()}))}},nameValue:l,onChangeName:function(e){h(e.target.value)},numberValue:m,onChangeNumber:function(e){O(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(f,{contactList:E,onClick:function(e,n){window.confirm("Delete ".concat(n," ?"))&&p.deletePerson(e).then((function(n){var c=t.filter((function(n){return n.id!==e}));r(c)}))}})]})};t(41);c.a.render(Object(o.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f2e886c6.chunk.js.map